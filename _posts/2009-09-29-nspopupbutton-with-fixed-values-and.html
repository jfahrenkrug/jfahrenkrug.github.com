--- 
name: nspopupbutton-with-fixed-values-and
layout: post
title: NSPopUpButton with Fixed Values and Bindings
time: 2009-09-29 10:17:00 Z
categories: 
- Programming
- Tutorials
- Cocoa
---
NSPopUpButton can be challenging to use. It would be quite desirable to have a very easy way to add an NSPopUpButton for fixed values, like "male" and "female". Unfortunately, that doesn't exist (at least not to my knowledge). That's why I'll show you really quick how to implement this with IB, bindings and some code.<br />
<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_-dK4R3d1lbc/SsHeX4dILTI/AAAAAAAAA40/frj5hNOZcSM/s1600-h/Screen+shot+2009-09-29+at+12.04.19.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/_-dK4R3d1lbc/SsHeX4dILTI/AAAAAAAAA40/frj5hNOZcSM/s320/Screen+shot+2009-09-29+at+12.04.19.png" /></a><br />
</div><ol><li>Create a plain old new Cocoa application in XCode and call it NSPopUpDemo.</li>
<li>Open NSPopUpDemoAppDelegate.h, and add these two ivars:<br />
<br />
<br />
<pre><div style="font: 11.0px Menlo; margin: 0.0px 0.0px 0.0px 0.0px;"><div style="color: #7332aa; font: 11.0px Menlo; margin: 0.0px 0.0px 0.0px 0.0px;">NSArray<span style="color: black;"> *</span><span style="color: #538187;">genders</span><span style="color: black;">;</span>

</div><span style="color: black;"></span>
<span style="color: black;"><div style="color: #538187; font: 11.0px Menlo; margin: 0.0px 0.0px 0.0px 0.0px;"><span style="color: #7332aa;">NSString</span><span style="color: black;"> *</span>selectedGender<span style="color: black;">;</span>

</div></span><div style="color: #7332aa; font: 11.0px Menlo; margin: 0.0px 0.0px 0.0px 0.0px;"><span style="color: #b818a3;">IBOutlet</span><span style="color: black;"> </span>NSArrayController<span style="color: black;"> *</span><span style="color: #538187;">arrayController</span><span style="color: black;">;</span>


</div></div>
</pre>And add this property:<br />
<br />
<br />
<div style="font: 11.0px Menlo; margin: 0.0px 0.0px 0.0px 0.0px;"><span style="color: #b818a3;">@property</span> (<span style="color: #b818a3;">nonatomic</span>, <span style="color: #b818a3;">copy</span>) NSString *selectedGender;<br />
</div><br />
<br />
</li>
<li>Switch to NSPopUpDemoAppDelegate.m and add this at the top: <br />
<br />
<br />
<pre><div style="font: 11.0px Menlo; margin: 0.0px 0.0px 0.0px 0.0px;"><span style="color: #b818a3;">@synthesize</span> selectedGender;


</div>
</pre>and add this to applicationDidFinishLaunching: <br />
<br />
<br />
<pre><div style="color: #420c81; font: 11.0px Menlo; margin: 0.0px 0.0px 0.0px 0.0px;"><span style="color: #538187;">genders</span><span style="color: black;"> = [[</span><span style="color: #7332aa;">NSArray</span><span style="color: black;"> </span>alloc<span style="color: black;">] </span>initWithObjects<span style="color: black;">:[</span><span style="color: #7332aa;">NSDictionary</span><span style="color: black;"> </span>dictionaryWithObjectsAndKeys<span style="color: black;">:</span><span style="color: #cc2c21;">@"male"</span><span style="color: black;">, </span><span style="color: #cc2c21;">@"name"</span><span style="color: black;">, </span><span style="color: #cc2c21;">@"m"</span><span style="color: black;">, </span><span style="color: #cc2c21;">@"value"</span><span style="color: black;">, </span><span style="color: #b818a3;">nil</span><span style="color: black;">],[<span style="color: #7332aa;">NSDictionary</span> <span style="color: #420c81;">dictionaryWithObjectsAndKeys</span>:<span style="color: #cc2c21;">@"female"</span>, <span style="color: #cc2c21;">@"name"</span>, <span style="color: #cc2c21;">@"f"</span>, <span style="color: #cc2c21;">@"value"</span>, <span style="color: #b818a3;">nil</span>], <span style="color: #b818a3;">nil</span>];</span>


</div><span style="color: black;"></span>
<span style="color: black;"><div style="color: #538187; font: 11.0px Menlo; margin: 0.0px 0.0px 0.0px 0.0px;"><span style="color: black;">[</span>arrayController<span style="color: black;"> </span><span style="color: #420c81;">setContent</span><span style="color: black;">:</span>genders<span style="color: black;">];</span>


</div></span></pre></li>
<li>Open MainMenu.xib </li>
<li>Drag an NSArrayController onto the nib and an NSPopUpButton onto the window. </li>
<li>Control-drag from the App Delegate to the Array Controller and connect the arrayController outlet.</li>
<li>Open the inspector for the NSPopUpButton. Bind it's content to Array Controller's arrangedObjects, it's content objects to Array Controller's arrangedObjects.value and it's content values to Array Controller's arrangedObjects.name:<br />
<br />
<br />
<br />
<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_-dK4R3d1lbc/SsHbAdOTROI/AAAAAAAAA4U/-mKTEVOulOs/s1600-h/Screen+shot+2009-09-29+at+11.37.46.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/_-dK4R3d1lbc/SsHbAdOTROI/AAAAAAAAA4U/-mKTEVOulOs/s320/Screen+shot+2009-09-29+at+11.37.46.png" /></a><br />
</div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_-dK4R3d1lbc/SsHbZRXK0VI/AAAAAAAAA4c/c-rx4VjlcuI/s1600-h/Screen+shot+2009-09-29+at+11.38.24.png" imageanchor="1" style="margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://3.bp.blogspot.com/_-dK4R3d1lbc/SsHbZRXK0VI/AAAAAAAAA4c/c-rx4VjlcuI/s320/Screen+shot+2009-09-29+at+11.38.24.png" /></a><br />
</div><br />
<br />
<br />
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_-dK4R3d1lbc/SsHb6ed96CI/AAAAAAAAA4k/eD6yvozPPDI/s1600-h/Screen+shot+2009-09-29+at+12.04.36.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_-dK4R3d1lbc/SsHb6ed96CI/AAAAAAAAA4k/eD6yvozPPDI/s320/Screen+shot+2009-09-29+at+12.04.36.png" /></a><br />
</div><br />
<br />
<br />
</li>
<li>Build and Run, you should be able to select male or female.</li>
<li>Open MainMenu.xib again and drag an NSTextField to the window. Bind it's value to the App Delegate's selectedGender:<br />
<br />
<br />
<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_-dK4R3d1lbc/SsHc3oZlWOI/AAAAAAAAA4s/7uaZwBlsMkw/s1600-h/Screen+shot+2009-09-29+at+11.58.35.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/_-dK4R3d1lbc/SsHc3oZlWOI/AAAAAAAAA4s/7uaZwBlsMkw/s320/Screen+shot+2009-09-29+at+11.58.35.png" /></a><br />
</div><br />
<br />
</li>
<li>Also open the Inspector for the NSPopUpButton and bind it's selectedObject also to the App Delegate's selectedGender.</li>
<li>Build and Run again. Now you should be able to enter "f" in the text field and the pop up should change to "female" and vice versa.</li>
<li>And you're done!</li>
</ol><br />
<div>Enjoy the bliss of KVC!<br />
</div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/4366452231084261097-3997636053115359189?l=blog.springenwerk.com' alt='' /></div>
<br/><hr/><h3>Comments</h3>
<h4><a href="http://www.blogger.com/profile/06858139109848220478">Nick</a> said...</h4>
<br/>oop, nevermind, step 10, duh.  Thanks again, you helped a lot<br/>
March 22, 2010 04:11 AM
<h4><a href="http://www.blogger.com/profile/06650223978538123548">Johannes Fahrenkrug</a> said...</h4>
<br/>Hi Jakub,<br /><br />no, I know you can do that. But the point of my post was to have a different value than the title that&#39;s displayed. I want the value to be &quot;f&quot; but the title in the popupbutton to be &quot;female&quot; and I want that to work with bindings. Unfortunately that doesn&#39;t seem to be possible to do in IB.<br /><br />- Johannes<br/>
October 23, 2009 05:06 AM
<h4><a href="http://www.blogger.com/profile/10820083350428666188">Jakub Suder</a> said...</h4>
<br/>Hmm... in Interface Builder, when you double-click on the popup button, you get a list of all options and you can edit or delete them. Also, if you look at the document window in hierarchical mode, you can expand the tree to see the popup button object and the options below it, then you can add new ones. Is this what you were looking for?<br/>
October 22, 2009 08:58 PM
