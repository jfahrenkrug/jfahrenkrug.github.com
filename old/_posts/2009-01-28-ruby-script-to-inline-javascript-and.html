--- 
name: ruby-script-to-inline-javascript-and
layout: post
title: Ruby Script to Inline JavaScript and CSS
time: 2009-01-28 14:19:00.002000 Z
categories: 
- JavaScript
- Programming
- Ruby
- OpenSocial
---
<p>MySpace requires that OpenSocial applications don’t reference external JavaScript and CSS files in the profile view. Of course from a “I’m a spiffy developer that neatly separates all his files” point of view inlining JavaScript and CSS is a Bad Thing®. From a performance point of view, inlining stuff often makes a lot of sense.</p>
<p>So what are we to do?</p>
<p>Well, I just wrote a small Ruby script that understands inline markers like <strong>###inline=somefile.js</strong> in your HTML/OpenSocial/XML/Whatever file. Yes, I could have used ERB or something else, but I felt like writing my own ;-). You just put code like this into your file:</p>
<pre class="prettyprint">
&lt;script type="text/javascript"&gt;
###inline=scripts.js
&lt;/script&gt;
&lt;style type="text/css"&gt;
###inline=styles.css
&lt;/style&gt;
</pre>
<p>Then, assuming that your file is called “template.xml”, running it through inliner.rb like this…</p>
<p><strong>ruby inliner.rb template.xml inlined_output.xml</strong></p>
<p>…will result in one file with both your JavaScript and your CSS files inlined.</p>
<p>Here’s the code:</p>
<script src="http://gist.github.com/53953.js"></script>
<p>Oh, and with this little snippet you can even inline binary images:</p>
<script src="http://gist.github.com/53962.js"></script>
<p>Enjoy!</p><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/4366452231084261097-6382901678630824629?l=blog.springenwerk.com' alt='' /></div>
