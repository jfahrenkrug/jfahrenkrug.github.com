---
import OldPostLayout from '../../../layouts/OldPostLayout.astro';
import { getCollection } from "astro:content";
// import PageLayout from "@/layouts/Base";
// import { sortMDByDate } from "../utils/archived_post";

// const meta = {
// 	title: "Archived Posts",
// 	description: "Archived Posts",
// };

export async function getStaticPaths() {
    const allPosts = await getCollection("archived_post");

    return allPosts.map((post) => {
        const slug = post.data.name
        const postDate = post.data.time
        const year = String(postDate.getFullYear())
        const month = String(postDate.getMonth() + 1).padStart(2, '0');

        return {
            params: { month, year, slug },
            props: { post, title: post.data.title }
        }
    });
}

const { year, month, slug } = Astro.params;
const { post, title } = Astro.props;
const { Content } = await post.render();
---
<OldPostLayout frontmatter={post.data}>
    <Content/>
</OldPostLayout>
