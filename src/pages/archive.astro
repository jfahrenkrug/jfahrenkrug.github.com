---
import { getCollection } from "astro:content";
import PageLayout from "@/layouts/Base";
import { sortMDByDate } from "../utils/archived_post";

const meta = {
	title: "Archived Posts",
	description: "Archived Posts",
};

const allPosts = await getCollection("archived_post");
const allPostsByDate = sortMDByDate(allPosts);
---

<PageLayout meta={meta}>
	<h1 class="title mb-6">{meta.title}</h1>
    <ul>
        {allPostsByDate.map((post) => {
            const slug = post.data.name
            const postDate = post.data.time
            const year = String(postDate.getFullYear())
            const month = String(postDate.getMonth() + 1).padStart(2, '0');

            return (<li><a href={`/${year}/${month}/${slug}.html`}>{post.data.title}</a></li>)
        })}
    </ul>
</PageLayout>

